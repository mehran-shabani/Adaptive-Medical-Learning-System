# =============================================================================
# Adaptive Medical Learning System - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env file to version control!

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME="Adaptive Medical Learning System"
ENVIRONMENT=development
DEBUG=true
API_V1_PREFIX=/api/v1

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string with pgvector extension
# Format: postgresql://user:password@host:port/database
POSTGRES_DB=adaptive_medical_learning
POSTGRES_USER=medical_user
POSTGRES_PASSWORD=medical_password
DATABASE_URL=postgresql://medical_user:medical_password@localhost:5432/adaptive_medical_learning

# For Docker: use service name as host
# DATABASE_URL=postgresql://medical_user:medical_password@db:5432/adaptive_medical_learning

# =============================================================================
# Redis Configuration
# =============================================================================
# Redis connection string for caching and task queue
REDIS_URL=redis://localhost:6379/0

# For Docker: use service name as host
# REDIS_URL=redis://redis:6379/0

# =============================================================================
# JWT Authentication
# =============================================================================
# IMPORTANT: Generate a secure secret key using: openssl rand -hex 32
JWT_SECRET_KEY=your-super-secret-jwt-key-CHANGE-THIS-IN-PRODUCTION
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# =============================================================================
# OpenAI API Configuration
# =============================================================================
# REQUIRED: Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
EMBEDDING_MODEL=text-embedding-3-small
LLM_MODEL=gpt-4o-mini
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000

# =============================================================================
# Vector Database Settings
# =============================================================================
USE_PGVECTOR=true
VECTOR_DIMENSION=1536

# Optional: Qdrant alternative
# QDRANT_URL=http://localhost:6333
# QDRANT_API_KEY=

# =============================================================================
# File Upload Settings
# =============================================================================
MAX_UPLOAD_SIZE_MB=50
UPLOAD_DIR=./uploads
ALLOWED_EXTENSIONS=[".pdf"]

# =============================================================================
# Content Processing
# =============================================================================
CHUNK_SIZE_MIN=300
CHUNK_SIZE_MAX=700
CHUNK_OVERLAP=50

# =============================================================================
# Quiz Settings
# =============================================================================
DEFAULT_QUIZ_SIZE=5
QUIZ_TIME_LIMIT_SECONDS=300

# =============================================================================
# Mastery Algorithm
# =============================================================================
MASTERY_INITIAL_SCORE=0.0
MASTERY_CORRECT_INCREMENT=0.1
MASTERY_INCORRECT_DECREMENT=0.05
MASTERY_WEAK_THRESHOLD=0.7

# =============================================================================
# Recommender Settings
# =============================================================================
STUDY_PLAN_DURATION_MINUTES=120
SPACED_REPETITION_THRESHOLD_DAYS=2

# =============================================================================
# OTP Settings (for Iranian phone numbers)
# =============================================================================
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=5
# Options: mock (for development), kavenegar (for production)
OTP_PROVIDER=mock

# Kavenegar SMS API (Optional - for production)
# Get API key from https://panel.kavenegar.com
# KAVENEGAR_API_KEY=your-kavenegar-api-key-here
# Set the Verify Lookup template name configured in Kavenegar panel
# KAVENEGAR_OTP_TEMPLATE=otp-template-name

# =============================================================================
# Celery/Background Tasks (Optional - not required for basic setup)
# =============================================================================
# CELERY_BROKER_URL=${REDIS_URL}
# CELERY_RESULT_BACKEND=${REDIS_URL}

# =============================================================================
# Flower Monitoring (Optional - for Celery monitoring)
# =============================================================================
# FLOWER_USER=admin
# FLOWER_PASSWORD=change-this-secure-password

# =============================================================================
# CORS Settings
# =============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://10.0.2.2:8000

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=info

# =============================================================================
# QUICK START FOR DEVELOPMENT
# =============================================================================
# 1. Copy this file: cp env.example .env (or rename in Windows)
# 2. Generate JWT secret: openssl rand -hex 32
# 3. Add your OpenAI API key (required for LLM features)
# 4. Start services: docker-compose up -d
# 5. Initialize database: docker-compose exec api python scripts/init_db.py
# 6. Access API docs: http://localhost:8000/docs

